<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
  
      const render = {
        state1: renderState1,
        state2: renderState2,
        state3: renderState3,
      };
      // Render function theo quy ước: renderState1, renderState2, ...
      function renderState1(val) {
        console.log("Render State1:", val);
      }
      function renderState2(val) {
        console.log("Render State2:", val);
      }
      function renderState3(val) {
        console.log("Render State3:", val);
      }
      const _state = new Proxy(
        {
          state1: 0,
          state2: 0,
          state3: 0,
        },
        {
          set(target, prop, value) {
            if (target[prop] !== value) {
              target[prop] = value;
              if (render[prop]) render[prop](value);
            }
            return true;
          },
        }
      );
      _state.state1 = 10; // Render State1: 10
      _state.state1 = 50; // Render State1: 10
      _state.state2 = 20; // Render State2: 20
      _state.state3 = 31500000; // Render State3: 30
    </script>
  </body>
</html>
